Implementation notes for "Acid-Base Solutions" (acid-base-solutions)

This is a port of the Java version of acid-base-solutions.

For a description of the model, see model.txt.

There is no model-view transform between the model and view portions of this sim. 
The transform is implicitly 1:1, with identical coordinate frames.
One unit of distance in the model is one unit of distance in the play area.
Positive x is to the right, positive y is down.

The model implementation makes heavy use of associate arrays, resulting in some code
that is difficult to read, search and refactor.

Below is the main data structure. Understand this thoroughly before attempting to make changes.
Notice that SolutionType functions both as a property name and a field value, very odd.
Both SolutionType and the 'key' field in the molecules objects are used as indices into
other associative arrays, to lookup colors, equations, molecules, etc.

// AcidBaseSolutionsModel, this.solutions
{
  SolutionType.WATER: {
    type: SolutionType.WATER,
    molecules: [
      {key: 'H2O', concentrationPropertyName: 'H2OConcentration'},
      {key: 'H3O', concentrationPropertyName: 'H3OConcentration'},
      {key: 'OH', concentrationPropertyName: 'OHConcentration'}
    ]
  },

  SolutionType.STRONG_ACID: {
    type: SolutionType.STRONG_ACID,
    // HA + H2O -> A- + H3O+
    molecules: [
      {key: 'HA', concentrationPropertyName: 'soluteConcentration'},
      {key: 'H2O', concentrationPropertyName: 'H2OConcentration'},
      {key: 'A', concentrationPropertyName: 'productConcentration'},
      {key: 'H3O', concentrationPropertyName: 'H3OConcentration'}
    ]
  },

  SolutionType.WEAK_ACID: {
    type: SolutionType.WEAK_ACID,
    molecules: [
      // HA + H2O <-> A- + H3O+
      {key: 'HA', concentrationPropertyName: 'soluteConcentration'},
      {key: 'H2O', concentrationPropertyName: 'H2OConcentration'},
      {key: 'A', concentrationPropertyName: 'productConcentration'},
      {key: 'H3O', concentrationPropertyName: 'H3OConcentration'}
    ]
  },

  SolutionType.STRONG_BASE: {
    type: SolutionType.STRONG_BASE,
    // MOH -> M+ + OH-
    molecules: [
      {key: 'MOH', concentrationPropertyName: 'soluteConcentration'},
      {key: 'M', concentrationPropertyName: 'productConcentration'},
      {key: 'OH', concentrationPropertyName: 'OHConcentration'}
    ]
  },

  SolutionType.WEAK_BASE: {
    type: SolutionType.WEAK_BASE,
    // B + H2O <-> BH+ + OH-
    molecules: [
      {key: 'B', concentrationPropertyName: 'soluteConcentration'},
      {key: 'H2O', concentrationPropertyName: 'H2OConcentration'},
      {key: 'BH', concentrationPropertyName: 'productConcentration'},
      {key: 'OH', concentrationPropertyName: 'OHConcentration'}
    ]
  }
}